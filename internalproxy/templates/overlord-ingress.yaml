#apiVersion: v1
#kind: Service
#metadata:
#  name: overlord
#spec:
#  ports:
#  - name: app
#    port: 8006
#    protocol: TCP
#    targetPort: 8006
#  clusterIP: None
#  type: ClusterIP
#
#---
#
#apiVersion: v1
#kind: Endpoints
#metadata:
#  name: overlord
#subsets:
#- addresses:
#  - ip: 192.168.21.254
#  ports:
#  - name: app
#    port: 8006
#    protocol: TCP
#
#---    
#
#apiVersion: traefik.containo.us/v1alpha1
#kind: IngressRoute
#metadata:
#  name: overlord-ingress
#  annotations:
#    cert-manager.io/cluster-issuer: letsencrypt-production
#spec:
#  entryPoints:
#    - websecure
#  routes:
#  - match: Host(`overlord.internal.durp.info`)
#    middlewares:
#    - name: whitelist
#      namespace: traefik  
#    kind: Rule
#    services:
#    - name: overlord
#      port: 8006
#      scheme: https
#  tls:
#    secretName: overlord-tls  
#
#---
#
#apiVersion: cert-manager.io/v1
#kind: Certificate
#metadata:
#  name: overlord-tls
#spec:
#  secretName: overlord-tls
#  issuerRef:
#    name: letsencrypt-production
#    kind: ClusterIssuer
#  commonName: "overlord.internal.durp.info"
#  dnsNames:
#  - "overlord.internal.durp.info"  